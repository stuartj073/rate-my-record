{% extends "base.html" %}
{% block content %}

<h3 class="center-align">{{ username }}'s Profile</h3>
<div class="row">
    <div class="col s12 m6 profile-reviews">
        <!-- Show all reviews created by the user -->
        <h3 class="center-align">Your Reviews</h3>
        <!-- if the user has no reviews -->
        {% if reviews|length == 0  %}
        <div>
            <h5 class="center-align">No reviews yet.</h5><br>
            <p class="center-align">Add record review<a href="{{ url_for('add_review') }}"> here.</a></p>
            <p class="center-align">Add store review<a href="{{ url_for('add_store_review') }}"> here.</a></p>
        </div>
        {% else %}
        
        <!-- Show user's reviews -->
        {% for review in reviews %}
        {% if review.created_by == session["user"] %}
        <div class="col s12 m6">
            <div class="card">
                <div class="card-image">
                    <a href="{{ url_for('review_page', review_id=review._id) }}"><img src="{{ review.img }}" height="200" width="200">
                    </a>
                </div>
                <div class="card-content">
                    <p class="center-align">{{ review.album_name }}</p>
                </div>
            </div>
        </div>
        {% endif %}
        {% endfor %}
        {% endif %}

        <!-- Store Reviews -->
        {% for store_review in store_reviews %}
        {% if store_review.created_by == session["user"] %}
        <div class="row">
            <div class="col s12 m6">
                <div class="card">
                    <div class="card-image">
                        <a href="{{ url_for('store_review_page', store_review_id=store_review._id) }}"><img src="{{ store_review.img }}" height="200" width="200">
                        </a>
                    </div>
                    <div class="card-content">
                        <p class="center-align">{{ store_review.store_name }}</p>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>

<!-- Display the reviews a user has added to their profile for wishlist -->
<div class="row">
    <div class="col s12 m6">
        <h3 class="center-align">Your wishlist</h3>
        {% for review in reviews %}
        {% if in_wishlist %}
        <div class="col s12 m6">
            <div class="card">
                <div class="card-image">
                    <a href="{{ url_for('review_page', review_id=review._id) }}"><img src="{{ review.img }}" height="200" width="200">
                    </a>
                </div>
                <div class="card-content">
                    <p class="center-align">{{ review.album_name }}</p>
                </div>
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>
</div>
<div class="row">
    <div class="col s12 m6">
        {% for store_review in store_reviews %}
        {% if in_wishlist %}
        <div class="col s12 m6">
            <div class="card">
                <div class="card-image">
                    <a href="{{ url_for('store_review_page', store_review_id=store_review._id) }}"><img src="{{ store_review.store_img }}" height="200" width="200">
                    </a>
                </div>
                <div class="card-content">
                    <p class="center-align">{{ store_review.store_name }}</p>
                </div>
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>
</div>
</div>
{% endblock %}